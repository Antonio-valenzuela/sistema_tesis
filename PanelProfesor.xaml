<Window x:Class="SistemaSeguimientoTesis.Views.PanelProfesor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Panel Profesor"
        Height="680" Width="1050"
        WindowStartupLocation="CenterScreen"
        Background="#FFF9F9FF">

	<Grid Margin="10">
		<TabControl>

			<TabItem Header="📚 Proyectos asignados">
				<Grid Margin="10">
					<DataGrid x:Name="dgProyectosAsignados"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              AlternatingRowBackground="#F5F5FA"
                              RowBackground="White">
						<DataGrid.Columns>
							<DataGridTextColumn Header="ID" Binding="{Binding ProyectoID}" Width="60"/>
							<DataGridTextColumn Header="Título" Binding="{Binding Titulo}" Width="2*"/>
							<DataGridTextColumn Header="Alumno" Binding="{Binding NombreAlumno}" Width="2*"/>
							<DataGridTextColumn Header="Progreso" Binding="{Binding Progreso}" Width="120"/>
						</DataGrid.Columns>
					</DataGrid>
				</Grid>
			</TabItem>

			<TabItem Header="📅 Citas">
				<Grid Margin="10">
					<DataGrid x:Name="dgCitas"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              AlternatingRowBackground="#F5F5FA"
                              RowBackground="White">
						<DataGrid.Columns>
							<DataGridTextColumn Header="ID" Binding="{Binding CitaID}" Width="60"/>
							<DataGridTextColumn Header="Fecha" Binding="{Binding FechaCita}" Width="180"/>
							<DataGridTextColumn Header="Alumno" Binding="{Binding NombreAlumno}" Width="*"/>
							<DataGridTextColumn Header="Descripción" Binding="{Binding Descripcion}" Width="2*"/>
						</DataGrid.Columns>
					</DataGrid>
				</Grid>
			</TabItem>

			<!-- DISPONIBILIDAD -->
			<TabItem Header="⏰ Disponibilidad">
				<Grid Margin="10">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>
					<StackPanel Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center">
						<TextBlock Text="Fecha:"
								   VerticalAlignment="Center"
								   Margin="0,0,5,0"/>
						<DatePicker x:Name="dpFechaDisponible"
									Width="120"
									Margin="0,0,10,0"/>

						<TextBlock Text="Hora inicio:"
								   VerticalAlignment="Center"
								   Margin="0,0,5,0"/>
						<TextBox x:Name="txtHoraInicio"
								 Width="70"
								 Margin="0,0,10,0"
								 ToolTip="Hora Inicio (HH:mm)"/>

						<TextBlock Text="Hora fin:"
								   VerticalAlignment="Center"
								   Margin="0,0,5,0"/>
						<TextBox x:Name="txtHoraFin"
								 Width="70"
								 Margin="0,0,10,0"
								 ToolTip="Hora Fin (HH:mm)"/>

						<TextBlock Text="Comentario:"
								   VerticalAlignment="Center"
								   Margin="0,0,5,0"/>
						<TextBox x:Name="txtComentarioDisponibilidad"
								 Width="200"
								 Margin="0,0,10,0"
								 ToolTip="Comentario opcional"/>

						<Button Content="Agregar"
								Width="100"
								Click="BtnAgregarDisponibilidad_Click"/>
						<Button Content="Eliminar"
								Margin="10,0,0,0"
								Width="100"
								Click="BtnEliminarDisponibilidad_Click"/>
					</StackPanel>


					<DataGrid x:Name="dgDisponibilidad"
                              Grid.Row="1"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              AlternatingRowBackground="#F5F5FA"
                              RowBackground="White">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Fecha" Binding="{Binding FechaTexto}" Width="150"/>
							<DataGridTextColumn Header="Hora inicio" Binding="{Binding HoraInicio}" Width="120"/>
							<DataGridTextColumn Header="Hora fin" Binding="{Binding HoraFin}" Width="120"/>
							<DataGridTextColumn Header="Comentario" Binding="{Binding Comentario}" Width="*"/>
						</DataGrid.Columns>
					</DataGrid>
				</Grid>
			</TabItem>

			<!-- ENTREGAS -->
			<TabItem Header="📂 Entregas recibidas">
				<Grid Margin="10">
					<Grid.RowDefinitions>
						<RowDefinition Height="*"/>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="200"/>
					</Grid.RowDefinitions>

					<DataGrid x:Name="dgEntregas" Grid.Row="0" AutoGenerateColumns="False" IsReadOnly="True"
                              AlternatingRowBackground="#F5F5FA" RowBackground="White" SelectionMode="Single"
                              SelectionChanged="DgEntregas_SelectionChanged">
						<DataGrid.Columns>
							<DataGridTextColumn Header="ID" Binding="{Binding EntregaID}" Width="40"/>
							<DataGridTextColumn Header="Alumno" Binding="{Binding NombreAlumno}" Width="150"/>
							<DataGridTextColumn Header="Proyecto" Binding="{Binding TituloProyecto}" Width="150"/>
							<DataGridTextColumn Header="Tipo" Binding="{Binding Tipo}" Width="100"/>
							<DataGridTextColumn Header="Fecha" Binding="{Binding FechaEntregaTexto}" Width="120"/>
							<DataGridTextColumn Header="Calif." Binding="{Binding Calificacion}" Width="50"/>

							<DataGridTemplateColumn Header="Archivo" Width="80">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<Button Content="Ver" Click="BtnVerEntrega_Click" Padding="5,0"/>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
							<DataGridTemplateColumn Header="Descargar" Width="80">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<Button Content="Bajar" Click="BtnDescargarEntrega_Click" Padding="5,0"/>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</DataGrid>

					<StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,10,0,10" HorizontalAlignment="Right">
						<TextBlock Text="Calif:" VerticalAlignment="Center" Margin="0,0,5,0"/>
						<ComboBox x:Name="cbCalificacion" Width="60" Margin="0,0,10,0">
							<ComboBoxItem Content="0"/>
							<ComboBoxItem Content="1"/>
							<ComboBoxItem Content="2"/>
							<ComboBoxItem Content="3"/>
							<ComboBoxItem Content="4"/>
							<ComboBoxItem Content="5"/>
							<ComboBoxItem Content="6"/>
							<ComboBoxItem Content="7"/>
							<ComboBoxItem Content="8"/>
							<ComboBoxItem Content="9"/>
							<ComboBoxItem Content="10"/>
						</ComboBox>
						<TextBlock Text="Comentario Final:" VerticalAlignment="Center" Margin="0,0,5,0"/>
						<TextBox x:Name="txtComentarioProfesor" Width="200" Height="26" Margin="0,0,10,0"/>
						<Button Content="Guardar Eval." Width="100" Click="BtnGuardarEvaluacion_Click"/>
					</StackPanel>

					<GroupBox Grid.Row="2" Header="💬 Historial de Feedback (Selecciona una entrega arriba)">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="300"/>
							</Grid.ColumnDefinitions>

							<ListBox x:Name="lbComentarios" Grid.Column="0" Margin="5">
								<ListBox.ItemTemplate>
									<DataTemplate>
										<StackPanel>
											<TextBlock Text="{Binding Autor}" FontWeight="Bold" Foreground="Navy"/>
											<TextBlock Text="{Binding Texto}" TextWrapping="Wrap"/>
											<TextBlock Text="{Binding FechaTexto}" FontSize="10" Foreground="Gray"/>
										</StackPanel>
									</DataTemplate>
								</ListBox.ItemTemplate>
							</ListBox>

							<StackPanel Grid.Column="1" Margin="5">
								<TextBlock Text="Nuevo mensaje al alumno:"/>
								<TextBox x:Name="txtNuevoComentario"
                                         Height="40"
                                         TextWrapping="Wrap"
                                         Margin="0,5"
                                         VerticalScrollBarVisibility="Auto"/>
								<Button Content="Enviar Mensaje"
                                        Width="130"
                                        HorizontalAlignment="Right"
                                        Click="BtnEnviarComentario_Click"/>
							</StackPanel>
						</Grid>
					</GroupBox>
				</Grid>
			</TabItem>

		</TabControl>
	</Grid>
</Window>








